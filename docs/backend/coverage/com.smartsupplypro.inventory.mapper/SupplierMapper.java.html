<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>SupplierMapper.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Inventory Service</a> &gt; <a href="index.source.html" class="el_package">com.smartsupplypro.inventory.mapper</a> &gt; <span class="el_source">SupplierMapper.java</span></div><h1>SupplierMapper.java</h1><pre class="source lang-java linenums">package com.smartsupplypro.inventory.mapper;

import com.smartsupplypro.inventory.dto.SupplierDTO;
import com.smartsupplypro.inventory.model.Supplier;

/**
 * Enterprise entity-DTO mapping utility for supplier data with comprehensive validation.
 * 
 * &lt;p&gt;Provides bidirectional transformation between {@link Supplier} entities and 
 * {@link SupplierDTO} data transfer objects with enterprise data quality features
 * including null safety, string sanitization, and validation support.&lt;/p&gt;
 * 
 * &lt;p&gt;&lt;strong&gt;Enterprise Data Quality Features:&lt;/strong&gt;&lt;/p&gt;
 * &lt;ul&gt;
 *   &lt;li&gt;&lt;strong&gt;Null Safety Patterns:&lt;/strong&gt; Comprehensive null checking throughout transformation&lt;/li&gt;
 *   &lt;li&gt;&lt;strong&gt;Data Sanitization:&lt;/strong&gt; Automatic string trimming and empty value normalization&lt;/li&gt;
 *   &lt;li&gt;&lt;strong&gt;Audit Field Handling:&lt;/strong&gt; Server-authoritative audit timestamp management&lt;/li&gt;
 *   &lt;li&gt;&lt;strong&gt;Validation Support:&lt;/strong&gt; Clean data preparation for validation frameworks&lt;/li&gt;
 * &lt;/ul&gt;
 * 
 * &lt;p&gt;&lt;strong&gt;Enterprise Architecture:&lt;/strong&gt; This mapper serves as the data quality gateway
 * for supplier management, ensuring consistent data standards across API boundaries and
 * supporting both create and update workflows with appropriate field handling.&lt;/p&gt;
 * 
 * &lt;p&gt;&lt;strong&gt;Performance Design:&lt;/strong&gt; Static utility pattern eliminates instance overhead
 * for high-throughput supplier transformation operations.&lt;/p&gt;
 */
public final class SupplierMapper {

    /**
     * Private constructor to prevent instantiation of utility class.
     * 
     * @throws UnsupportedOperationException if instantiation is attempted
     */
<span class="nc" id="L35">    private SupplierMapper() {</span>
<span class="nc" id="L36">        throw new UnsupportedOperationException(&quot;Utility class - no instances allowed&quot;);</span>
    }

    /**
     * Transforms a supplier entity to a data transfer object with null safety validation.
     *
     * &lt;p&gt;&lt;strong&gt;Enterprise Data Quality Transformation:&lt;/strong&gt;&lt;/p&gt;
     * &lt;ul&gt;
     *   &lt;li&gt;&lt;strong&gt;Null Safety:&lt;/strong&gt; Graceful handling of null entities and null properties&lt;/li&gt;
     *   &lt;li&gt;&lt;strong&gt;Field Preservation:&lt;/strong&gt; Complete entity field mapping with validation&lt;/li&gt;
     *   &lt;li&gt;&lt;strong&gt;Audit Metadata:&lt;/strong&gt; Preserves creation and modification timestamps&lt;/li&gt;
     *   &lt;li&gt;&lt;strong&gt;API Readiness:&lt;/strong&gt; Returns clean DTO for client consumption&lt;/li&gt;
     * &lt;/ul&gt;
     *
     * &lt;p&gt;&lt;strong&gt;Data Quality Assurance:&lt;/strong&gt; This transformation ensures all supplier
     * data meets enterprise standards before API delivery, supporting both list views
     * and detailed supplier management workflows.&lt;/p&gt;
     *
     * @param supplier entity from persistence layer (may be null for optional relationships)
     * @return DTO optimized for API responses and frontend consumption (null if input is null)
     * @implNote Returns null for null input to support optional relationship handling
     */
    public static SupplierDTO toDTO(Supplier supplier) {
<span class="pc bpc" id="L59" title="1 of 2 branches missed.">        if (supplier == null) return null;</span>
<span class="fc" id="L60">        return SupplierDTO.builder()</span>
<span class="fc" id="L61">                .id(supplier.getId())</span>
<span class="fc" id="L62">                .name(supplier.getName())</span>
<span class="fc" id="L63">                .contactName(supplier.getContactName())</span>
<span class="fc" id="L64">                .phone(supplier.getPhone())</span>
<span class="fc" id="L65">                .email(supplier.getEmail())</span>
                // audit fields are safe to expose in DTO
<span class="fc" id="L67">                .createdBy(supplier.getCreatedBy())</span>
<span class="fc" id="L68">                .createdAt(supplier.getCreatedAt())</span>
                // add these only if your entity has them; otherwise omit
                // .updatedBy(supplier.getUpdatedBy())
                // .updatedAt(supplier.getUpdatedAt())
<span class="fc" id="L72">                .build();</span>
    }

    /**
     * Transforms a supplier DTO to an entity with data sanitization and validation.
     *
     * &lt;p&gt;&lt;strong&gt;Enterprise Data Sanitization:&lt;/strong&gt;&lt;/p&gt;
     * &lt;ul&gt;
     *   &lt;li&gt;&lt;strong&gt;String Trimming:&lt;/strong&gt; Automatic whitespace removal and null normalization&lt;/li&gt;
     *   &lt;li&gt;&lt;strong&gt;Server Authoritative Fields:&lt;/strong&gt; Excludes audit fields managed by service layer&lt;/li&gt;
     *   &lt;li&gt;&lt;strong&gt;Create vs Update Support:&lt;/strong&gt; Handles both new entity creation and updates&lt;/li&gt;
     *   &lt;li&gt;&lt;strong&gt;Data Quality:&lt;/strong&gt; Ensures clean data before persistence validation&lt;/li&gt;
     * &lt;/ul&gt;
     *
     * &lt;p&gt;&lt;strong&gt;Enterprise Field Management:&lt;/strong&gt; Server-authoritative fields like {@code id},
     * {@code createdAt}, and {@code createdBy} are intentionally excluded as they are managed
     * by the service layer to ensure audit integrity and security compliance.&lt;/p&gt;
     *
     * @param dto incoming supplier DTO from API requests (may be null for optional processing)
     * @return sanitized entity ready for service layer processing (null if input is null)
     * @implNote Uses trimOrNull() utility for consistent string sanitization across all fields
     */
    public static Supplier toEntity(SupplierDTO dto) {
<span class="pc bpc" id="L95" title="1 of 2 branches missed.">        if (dto == null) return null;</span>

        // If your Supplier has Lombok @Builder:
<span class="fc" id="L98">        return Supplier.builder()</span>
<span class="fc" id="L99">                .id(dto.getId()) // controller enforces null on create; service may override</span>
<span class="fc" id="L100">                .name(trimOrNull(dto.getName()))</span>
<span class="fc" id="L101">                .contactName(trimOrNull(dto.getContactName()))</span>
<span class="fc" id="L102">                .phone(trimOrNull(dto.getPhone()))</span>
<span class="fc" id="L103">                .email(trimOrNull(dto.getEmail()))</span>
                // DO NOT set createdBy/createdAt from DTO here; service sets those.
<span class="fc" id="L105">                .build();</span>

        // If you DON'T have @Builder on Supplier, use setters instead:
        // Supplier e = new Supplier();
        // e.setId(dto.getId());
        // e.setName(trimOrNull(dto.getName()));
        // e.setContactName(trimOrNull(dto.getContactName()));
        // e.setPhone(trimOrNull(dto.getPhone()));
        // e.setEmail(trimOrNull(dto.getEmail()));
        // return e;
    }

    /**
     * Enterprise string sanitization utility for data quality assurance.
     *
     * &lt;p&gt;&lt;strong&gt;Data Quality Transformation:&lt;/strong&gt;&lt;/p&gt;
     * &lt;ul&gt;
     *   &lt;li&gt;&lt;strong&gt;Whitespace Normalization:&lt;/strong&gt; Removes leading and trailing whitespace&lt;/li&gt;
     *   &lt;li&gt;&lt;strong&gt;Empty String Handling:&lt;/strong&gt; Converts empty strings to null for database consistency&lt;/li&gt;
     *   &lt;li&gt;&lt;strong&gt;Null Safety:&lt;/strong&gt; Gracefully handles null input values&lt;/li&gt;
     *   &lt;li&gt;&lt;strong&gt;Database Optimization:&lt;/strong&gt; Prevents empty string storage for cleaner queries&lt;/li&gt;
     * &lt;/ul&gt;
     *
     * &lt;p&gt;&lt;strong&gt;Enterprise Usage:&lt;/strong&gt; This utility ensures consistent string handling
     * across all supplier fields, supporting database constraints and improving data quality
     * for search and reporting operations.&lt;/p&gt;
     *
     * @param s the string value to sanitize (may be null)
     * @return trimmed string or null if input was null or became empty after trimming
     * @implNote Converts empty strings to null to maintain database normalization standards
     */
    private static String trimOrNull(String s) {
<span class="pc bpc" id="L137" title="1 of 2 branches missed.">        if (s == null) return null;</span>
<span class="fc" id="L138">        String t = s.trim();</span>
<span class="pc bpc" id="L139" title="1 of 2 branches missed.">        return t.isEmpty() ? null : t;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>