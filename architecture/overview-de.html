<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Backend ¬∑ overview-de ¬∑ Smart Supply Pro Docs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- CSS lives under /templates on GitHub Pages for inventory-service repo -->
  <link rel="stylesheet" href="/inventory-service/templates/docs.css" />
</head>
<body>
  <header class="topbar">
    <div class="topbar-inner">
      <a href="/inventory-service/" class="logo">üì¶ Smart Supply Pro Docs</a>
      <nav class="nav">
      <a href="/inventory-service/architecture/index.html">Backend Architecture</a>
        <!-- Future: <a href="/inventory-service/frontend/architecture/overview.html">Frontend</a> -->
        <a href="/inventory-service/backend/api/index.html">Backend API</a>
        <!-- Future: <a href="/inventory-service/frontend/api/index.html">Frontend API</a> -->
        <a href="/inventory-service/backend/coverage/index.html">Backend Coverage</a>
        <!-- Future: <a href="/inventory-service/frontend/coverage/index.html">Frontend Coverage</a> -->
      </nav>
    </div>
  </header>

  <main class="layout">
    <aside class="sidebar">
      <h2>Backend</h2>
      <ul>
        <li><a href="/inventory-service/architecture/overview.html">Architecture Overview</a></li>
        <li><a href="/inventory-service/architecture/overview-de.html">Architektur-√úberblick</a></li>
        <li><a href="/inventory-service/architecture/layers/overview.html">Layers</a></li>
        <li><a href="/inventory-service/architecture/model/index.html">Data Models</a></li>
        <li><a href="/inventory-service/architecture/enums/index.html">Enums</a></li>
        <li><a href="/inventory-service/architecture/dto/index.html">DTOs</a></li>
        <li><a href="/inventory-service/architecture/config.html">Config</a></li>
        <li><a href="/inventory-service/architecture/controller/index.html">Controllers</a></li>
        <li><a href="/inventory-service/architecture/security.html">Security</a></li>
        <li><a href="/inventory-service/architecture/deployment.html">Deployment</a></li>
      </ul>

      <h2>Frontend</h2>
      <ul>
        <h3>Docs coming soon</h3>
        <!-- Future <li><a href="/inventory-service/frontend/architecture/overview.html">Architecture Overview</a></li> -->
      </ul>

      <h2>Quality</h2>
      <ul>
        <li><a href="/inventory-service/backend/api/index.html">API Reference</a></li>
        <li><a href="/inventory-service/backend/coverage/index.html">JaCoCo Coverage</a></li>
      </ul>
    </aside>

    <section class="content">
            <nav class="toc">
        <h2>On this page</h2>
        <ul>
        <li><a href="#backend-architektur-√ºberblick"
        id="toc-backend-architektur-√ºberblick">Backend-Architektur-√úberblick</a>
        <ul>
        <li><a href="#einf√ºhrung"
        id="toc-einf√ºhrung">Einf√ºhrung</a></li>
        <li><a href="#system-architektur-diagramm"
        id="toc-system-architektur-diagramm">System-Architektur-Diagramm</a></li>
        <li><a href="#kern-schichten"
        id="toc-kern-schichten">Kern-Schichten</a>
        <ul>
        <li><a href="#apicontroller-schicht"
        id="toc-apicontroller-schicht">1.
        <strong>API/Controller-Schicht</strong></a></li>
        <li><a href="#service-schicht" id="toc-service-schicht">2.
        <strong>Service-Schicht</strong></a></li>
        <li><a href="#validierungs-schicht"
        id="toc-validierungs-schicht">3.
        <strong>Validierungs-Schicht</strong></a></li>
        <li><a href="#repository-schicht" id="toc-repository-schicht">4.
        <strong>Repository-Schicht</strong></a></li>
        <li><a href="#daten-schicht" id="toc-daten-schicht">5.
        <strong>Daten-Schicht</strong></a></li>
        </ul></li>
        <li><a href="#authentifizierung-sicherheit"
        id="toc-authentifizierung-sicherheit">Authentifizierung &amp;
        Sicherheit</a>
        <ul>
        <li><a href="#oauth2-integration"
        id="toc-oauth2-integration">OAuth2-Integration</a></li>
        <li><a href="#autorisierungs-modell"
        id="toc-autorisierungs-modell">Autorisierungs-Modell</a></li>
        <li><a href="#request-scoped-sicherheit"
        id="toc-request-scoped-sicherheit">Request-Scoped
        Sicherheit</a></li>
        </ul></li>
        <li><a href="#exception-handling"
        id="toc-exception-handling">Exception-Handling</a></li>
        <li><a href="#datenfluss-beispiel-erstellen-eines-bestandsitems"
        id="toc-datenfluss-beispiel-erstellen-eines-bestandsitems">Datenfluss-Beispiel:
        Erstellen eines Bestandsitems</a></li>
        <li><a href="#wichtigste-design-muster"
        id="toc-wichtigste-design-muster">Wichtigste Design-Muster</a>
        <ul>
        <li><a href="#dependency-injection"
        id="toc-dependency-injection">1. <strong>Dependency
        Injection</strong></a></li>
        <li><a href="#repository-muster" id="toc-repository-muster">2.
        <strong>Repository-Muster</strong></a></li>
        <li><a href="#dto-muster" id="toc-dto-muster">3.
        <strong>DTO-Muster</strong></a></li>
        <li><a href="#service-locator-via-spring"
        id="toc-service-locator-via-spring">4. <strong>Service Locator
        (via Spring)</strong></a></li>
        <li><a href="#exception-√ºbersetzung"
        id="toc-exception-√ºbersetzung">5.
        <strong>Exception-√úbersetzung</strong></a></li>
        <li><a href="#validierungs-helfer"
        id="toc-validierungs-helfer">6.
        <strong>Validierungs-Helfer</strong></a></li>
        </ul></li>
        <li><a href="#performance-√ºberlegungen"
        id="toc-performance-√ºberlegungen">Performance-√úberlegungen</a></li>
        <li><a href="#skalierungsstrategie"
        id="toc-skalierungsstrategie">Skalierungsstrategie</a></li>
        <li><a href="#test-architektur"
        id="toc-test-architektur">Test-Architektur</a></li>
        <li><a href="#n√§chste-schritte"
        id="toc-n√§chste-schritte">N√§chste Schritte</a></li>
        </ul></li>
        </ul>
      </nav>
      
      <article class="doc-body">
        <p><a href="./index.html">‚¨ÖÔ∏è Zur√ºck zum
        Architektur-Index</a></p>
        <h1
        id="backend-architektur-√ºberblick">Backend-Architektur-√úberblick</h1>
        <h2 id="einf√ºhrung">Einf√ºhrung</h2>
        <p>Das Backend von Smart Supply Pro ist ein modernes,
        Spring-Boot-basiertes Lagerverwaltungssystem, das f√ºr die
        Verwaltung komplexer Lieferantenbeziehungen, Bestandsverfolgung
        und Echtzeit-Bestandsanalysen konzipiert ist. Die Architektur
        betont <strong>Skalierbarkeit</strong>,
        <strong>Wartbarkeit</strong> und <strong>Sicherheit</strong>
        durch wohldefinierteverstandteile Ebenen und klare Separation of
        Concerns.</p>
        <blockquote>
        <p><strong>üëâ F√ºr eine detaillierte Aufschl√ºsselung jeder
        Architektur-Schicht, siehe <a
        href="./layers/overview.html">Schichten-Architektur</a></strong>
        - Umfassende Dokumentation von Controller-, Service-,
        Repository-, Modell- und Infrastruktur-Schichten mit
        Codebeispielen und Interaktionsmustern.</p>
        </blockquote>
        <h2
        id="system-architektur-diagramm">System-Architektur-Diagramm</h2>
        <div class="mermaid">
        graph TB
            Client["Client-Anwendungen"]
            API["REST-API-Schicht"]
            Controller["Controller"]
            Service["Gesch√§ftslogik-Schicht"]
            Validation["Validierungs-Schicht"]
            Repository["Repository-Schicht"]
            Database["Datenbank"]
            Cache["Cache"]
            Security["Sicherheit & Authentifizierung"]

            Client -->|HTTP-Anfragen| API
            API --> Security
            Security -->|Authentifiziert| Controller
            Controller --> Service
            Service --> Validation
            Service --> Repository
            Repository -->|CRUD-Operationen| Database
            Repository -->|Query-Cache| Cache
            Service -.->|Aktuellen Benutzer abrufen| Security

            style Client fill:#e1f5ff
            style API fill:#b3e5fc
            style Controller fill:#81d4fa
            style Service fill:#4fc3f7
            style Validation fill:#29b6f6
            style Repository fill:#03a9f4
            style Database fill:#0288d1
            style Cache fill:#0277bd
            style Security fill:#e0f2f1
        </div>
        <h2 id="kern-schichten">Kern-Schichten</h2>
        <h3 id="apicontroller-schicht">1.
        <strong>API/Controller-Schicht</strong></h3>
        <p>Der Einstiegspunkt f√ºr alle HTTP-Anfragen. Controller
        verwalten: - <strong>Request-Routing</strong> - Ordnet
        HTTP-Endpunkte Controller-Methoden zu -
        <strong>DTO-Konvertierung</strong> - Konvertiert eingehende JSON
        in DTOs - <strong>Response-Formatierung</strong> - Serialisiert
        Domain-Objekte zu JSON -
        <strong>Basis-Parametervalidierung</strong> - Spring‚Äôs <span
        class="citation" data-cites="Valid">@Valid</span> Annotation</p>
        <p><strong>Wichtigste Komponenten:</strong> -
        <code>SupplierController</code> - Verwaltet CRUD-Operationen f√ºr
        Lieferanten - <code>InventoryItemController</code> - Handhabt
        Bestandsverwaltung - <code>StockHistoryController</code> -
        Verfolgt Bestands√§nderungen und Auditing -
        <code>AnalyticsController</code> - Stellt Analytics- und
        Report-Endpunkte bereit - <code>AuthController</code> -
        OAuth2-Authentifizierungs-Endpunkte</p>
        <p><strong>Beispiel-Muster:</strong></p>
        <div class="sourceCode" id="cb1"><pre
        class="sourceCode java"><code class="sourceCode java"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="at">@PostMapping</span><span class="op">(</span><span class="st">&quot;/suppliers&quot;</span><span class="op">)</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="at">@PreAuthorize</span><span class="op">(</span><span class="st">&quot;hasRole(&#39;ADMIN&#39;)&quot;</span><span class="op">)</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> ResponseEntity<span class="op">&lt;</span>SupplierDTO<span class="op">&gt;</span> <span class="fu">createSupplier</span><span class="op">(</span><span class="at">@Valid</span> <span class="at">@RequestBody</span> CreateSupplierDTO dto<span class="op">)</span> <span class="op">{</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>    SupplierDTO created <span class="op">=</span> supplierService<span class="op">.</span><span class="fu">create</span><span class="op">(</span>dto<span class="op">);</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ResponseEntity<span class="op">.</span><span class="fu">status</span><span class="op">(</span>HttpStatus<span class="op">.</span><span class="fu">CREATED</span><span class="op">).</span><span class="fu">body</span><span class="op">(</span>created<span class="op">);</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
        <h3 id="service-schicht">2.
        <strong>Service-Schicht</strong></h3>
        <p>Enth√§lt die gesamte Gesch√§ftslogik und koordiniert
        Operationen: - <strong>Gesch√§ftsregel-Validierung</strong> -
        Komplexe Validierung √ºber einfache Constraints hinaus -
        <strong>Transaktionsverwaltung</strong> - Koordiniert
        Datenbankoperationen - <strong>Cross-Cutting Concerns</strong> -
        Logging, Auditing und Exception-Mapping -
        <strong>Datentransformation</strong> - Konvertiert zwischen DTOs
        und Entities - <strong>Externe Integrationen</strong> - Aufrufe
        zu externen APIs oder Services</p>
        <p><strong>Wichtigste Services:</strong> -
        <code>SupplierService</code> -
        Lieferanten-Lebenszyklusverwaltung mit L√∂sch-Validierung -
        <code>InventoryItemService</code> - Item-Verwaltung mit
        Bestandsverfolgung - <code>StockHistoryService</code> -
        Audit-Trail und Bestandsbewegungsprotokollierung -
        <code>AnalyticsService</code> - Finanzielle Analyse (WAC, FIFO)
        und Reporting</p>
        <p><strong>Design-Muster:</strong> - <strong>Dependency
        Injection</strong> - Alle Abh√§ngigkeiten von Spring autowired -
        <strong>Exception-√úbersetzung</strong> - Gesch√§ftsexceptions auf
        HTTP-Status-Codes gemappt - <strong>Validierungs-Helfer</strong>
        - Separate Helfer-Klassen f√ºr komplexe Validierungen -
        <strong>Audit-Protokollierung</strong> - Integration mit
        Audit-Service f√ºr √Ñnderungsverfolgung</p>
        <h3 id="validierungs-schicht">3.
        <strong>Validierungs-Schicht</strong></h3>
        <p>Multi-Ebenen-Validierung gew√§hrleistet Datenintegrit√§t:</p>
        <p><strong>Ebene 1 - Controller-Ebene:</strong> Spring‚Äôs
        <code>@Valid</code> Annotation mit <code>@NotBlank</code>,
        <code>@NotNull</code>, etc.</p>
        <p><strong>Ebene 2 - Service-Ebene:</strong>
        Gesch√§ftsregel-Validierung - Eindeutigkeitspr√ºfungen
        (Lieferantenname, Item-Name) - Beziehungsvalidierung (Items
        m√ºssen g√ºltigen Lieferanten haben) - Zustandsvalidierung (k√∂nnen
        Lieferanten mit Bestand nicht l√∂schen)</p>
        <p><strong>Ebene 3 - Repository-Ebene:</strong>
        Datenbank-Constraints und eindeutige Indizes</p>
        <p><strong>Validierungs-Komponenten:</strong> -
        <code>SupplierValidator</code> - Lieferanten-spezifische Regeln
        - <code>InventoryItemValidator</code> - Item-Eindeutigkeit und
        Lieferanten-Validierung - Benutzerdefinierte Validatoren f√ºr
        Enums und Gesch√§ftsregeln</p>
        <p><strong>Beispiel:</strong></p>
        <div class="sourceCode" id="cb2"><pre
        class="sourceCode java"><code class="sourceCode java"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">void</span> <span class="fu">validateUniquenessOnCreate</span><span class="op">(</span><span class="bu">String</span> name<span class="op">)</span> <span class="op">{</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>repository<span class="op">.</span><span class="fu">existsByNameIgnoreCase</span><span class="op">(</span>name<span class="op">))</span> <span class="op">{</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>        <span class="cf">throw</span> <span class="kw">new</span> <span class="bu">IllegalStateException</span><span class="op">(</span><span class="st">&quot;Lieferantenname existiert bereits: &quot;</span> <span class="op">+</span> name<span class="op">);</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
        <h3 id="repository-schicht">4.
        <strong>Repository-Schicht</strong></h3>
        <p>Verwaltet alle Datenbank-Interaktionen: -
        <strong>CRUD-Operationen</strong> - Erstellen, Lesen,
        Aktualisieren, L√∂schen von Entities - <strong>Benutzerdefinierte
        Queries</strong> - Komplexe Such- und Aggregationsabfragen -
        <strong>Pagination</strong> - Paginierung gro√üer Datenmengen -
        <strong>Performance-Optimierung</strong> - Query-Optimierung und
        Indexierung</p>
        <p><strong>Wichtigste Repositories:</strong> -
        <code>SupplierRepository</code> - Lieferanten-Datenzugriff -
        <code>InventoryItemRepository</code> - Bestandsdatenzugriff mit
        erweiterter Suche - <code>StockHistoryRepository</code> -
        Bestandsbewegung Audit-Trail und Analytics -
        <code>CustomQueryRepository</code> - Komplexe Aggregation und
        Analytics-Abfragen</p>
        <p><strong>Spring Data JPA Funktionen:</strong> - Automatische
        Pagination-Unterst√ºtzung via <code>Pageable</code> Interface -
        Benutzerdefinierte <code>@Query</code> Methoden f√ºr komplexe
        Operationen - Method-Name-Konventionen f√ºr einfache Queries -
        Transaktionsverwaltung durch <code>@Transactional</code></p>
        <h3 id="daten-schicht">5. <strong>Daten-Schicht</strong></h3>
        <p>Die Persistierungs-Ebene mit Entities und Beziehungen: -
        <code>Supplier</code> - Lieferanten-Informationen und
        Kontaktdetails - <code>InventoryItem</code> -
        Produkt-/Bestandsdaten - <code>StockHistory</code> - Audit-Trail
        aller Bestandsbewegungen - JPA-Beziehungen mit Cascading und
        Fetch-Strategien</p>
        <p><strong>Wichtigste Design-Entscheidungen:</strong> -
        <strong>Optimistic Locking</strong> - Versionsfelde verhindern
        Konflikte bei gleichzeitigen Updates - <strong>Soft
        Deletes</strong> - Logisches L√∂schen statt physischem Entfernen
        wo n√∂tig - <strong>Audit-Felder</strong> -
        <code>createdAt</code>, <code>updatedAt</code>,
        <code>createdBy</code> Verfolgung -
        <strong>Enum-Spalten</strong> - Typsichere
        Aufz√§hlungsspeicherung</p>
        <h2 id="authentifizierung-sicherheit">Authentifizierung &amp;
        Sicherheit</h2>
        <h3 id="oauth2-integration">OAuth2-Integration</h3>
        <p>Smart Supply Pro verwendet <strong>OAuth2</strong> f√ºr
        Authentifizierung mit Unterst√ºtzung f√ºr mehrere Provider (z.B.
        Google, GitHub).</p>
        <div class="mermaid">
        sequenceDiagram
            Client->>OAuth2Provider: Autorisierung anfordern
            OAuth2Provider->>Client: Autorisierungscode
            Client->>Controller: Autorisierungscode einreichen
            Controller->>AuthService: Code gegen Token austauschen
            AuthService->>OAuth2Provider: Token validieren
            OAuth2Provider->>AuthService: Token g√ºltig + Benutzerinformationen
            AuthService->>Client: JWT/Session-Token
            Client->>API: Token in Headers einf√ºgen
            API->>SecurityContext: Token validieren & Principal aufbauen
            SecurityContext->>Controller: Mit authentifiziertem Principal ausf√ºhren
        </div>
        <h3 id="autorisierungs-modell">Autorisierungs-Modell</h3>
        <p><strong>Rollenbasierte Zugriffskontrolle (RBAC):</strong> -
        <strong>ADMIN</strong> - Vollst√§ndiger Systemzugriff, kann alle
        Operationen durchf√ºhren - <strong>USER</strong> - Limitierter
        Zugriff auf Bestandsanzeige und grundlegende Operationen</p>
        <p><strong>Implementierung:</strong></p>
        <div class="sourceCode" id="cb3"><pre
        class="sourceCode java"><code class="sourceCode java"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="at">@PreAuthorize</span><span class="op">(</span><span class="st">&quot;hasRole(&#39;ADMIN&#39;)&quot;</span><span class="op">)</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="dt">void</span> <span class="fu">deleteSupplier</span><span class="op">(</span><span class="bu">String</span> id<span class="op">)</span> <span class="op">{</span> <span class="kw">...</span> <span class="op">}</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="at">@PreAuthorize</span><span class="op">(</span><span class="st">&quot;hasRole(&#39;USER&#39;) or hasRole(&#39;ADMIN&#39;)&quot;</span><span class="op">)</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> <span class="bu">List</span><span class="op">&lt;</span>InventoryItemDTO<span class="op">&gt;</span> <span class="fu">searchItems</span><span class="op">(</span><span class="bu">String</span> name<span class="op">)</span> <span class="op">{</span> <span class="kw">...</span> <span class="op">}</span></span></code></pre></div>
        <h3 id="request-scoped-sicherheit">Request-Scoped
        Sicherheit</h3>
        <p>Jede Anfrage wird √ºber Spring Security authentifiziert: 1.
        Token aus Authorization-Header extrahiert 2. Token gegen
        OAuth2-Provider validiert 3. Principal (Benutzer) im
        SecurityContext etabliert 4. <span class="citation"
        data-cites="PreAuthorize">@PreAuthorize</span> Checks
        durchgef√ºhrt vor Method-Ausf√ºhrung 5. Audit-Informationen
        erfasst (<code>createdBy</code> Feld) aus SecurityContext</p>
        <h2 id="exception-handling">Exception-Handling</h2>
        <p>Konsistentes Exception-Handling in der gesamten
        Anwendung:</p>
        <div class="mermaid">
        graph LR
            Service["Service-Logik"]
            BusinessEx["Gesch√§fts-Exception"]
            DataEx["Daten-Exception"]
            ControllerAdv["Exception-Handler"]
            ErrorResponse["Error-Response<br/>HTTP-Status + Nachricht"]

            Service -->|Validierung fehlgeschlagen| BusinessEx
            Service -->|DB-Constraint| DataEx
            BusinessEx --> ControllerAdv
            DataEx --> ControllerAdv
            ControllerAdv --> ErrorResponse
        </div>
        <p><strong>Exception-Hierarchie:</strong> -
        <code>IllegalArgumentException</code> ‚Üí HTTP 400 Bad Request -
        <code>IllegalStateException</code> ‚Üí HTTP 409 Conflict -
        <code>DataIntegrityViolationException</code> ‚Üí HTTP 409 Conflict
        - <code>EntityNotFoundException</code> ‚Üí HTTP 404 Not Found -
        <code>AccessDeniedException</code> ‚Üí HTTP 403 Forbidden -
        <code>Exception</code> ‚Üí HTTP 500 Internal Server Error</p>
        <p><strong>Beispiel:</strong></p>
        <div class="sourceCode" id="cb4"><pre
        class="sourceCode java"><code class="sourceCode java"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="at">@ExceptionHandler</span><span class="op">(</span><span class="bu">IllegalStateException</span><span class="op">.</span><span class="fu">class</span><span class="op">)</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="kw">public</span> ResponseEntity<span class="op">&lt;</span>ErrorResponse<span class="op">&gt;</span> <span class="fu">handleIllegalState</span><span class="op">(</span><span class="bu">IllegalStateException</span> ex<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ResponseEntity<span class="op">.</span><span class="fu">status</span><span class="op">(</span>HttpStatus<span class="op">.</span><span class="fu">CONFLICT</span><span class="op">)</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">body</span><span class="op">(</span><span class="kw">new</span> <span class="fu">ErrorResponse</span><span class="op">(</span><span class="st">&quot;CONFLICT&quot;</span><span class="op">,</span> ex<span class="op">.</span><span class="fu">getMessage</span><span class="op">()));</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
        <h2
        id="datenfluss-beispiel-erstellen-eines-bestandsitems">Datenfluss-Beispiel:
        Erstellen eines Bestandsitems</h2>
        <p>So flie√üt eine Anfrage durch die Architektur:</p>
        <pre><code>1. HTTP POST /inventory/items
   ‚Üì
2. InventoryItemController.create(CreateItemDTO)
   - DTO-Struktur mit @Valid validieren
   ‚Üì
3. InventoryItemService.save(CreateItemDTO)
   - DTO zu Entity konvertieren
   - Item-Namen-Eindeutigkeit validieren
   - Lieferant existiert validieren
   ‚Üì
4. InventoryItemRepository.save(InventoryItem)
   - Datenbank INSERT mit Constraints
   ‚Üì
5. StockHistoryService.logInitialStock(InventoryItem)
   - Audit-Eintrag erstellen
   ‚Üì
6. Response: InventoryItemDTO mit generierter ID</code></pre>
        <h2 id="wichtigste-design-muster">Wichtigste Design-Muster</h2>
        <h3 id="dependency-injection">1. <strong>Dependency
        Injection</strong></h3>
        <p>Alle Komponenten verwenden Constructor Injection f√ºr bessere
        Testbarkeit und explizite Abh√§ngigkeiten.</p>
        <h3 id="repository-muster">2.
        <strong>Repository-Muster</strong></h3>
        <p>Abstrahiert Datenbankzugriff durch Repository-Interfaces,
        erm√∂glicht einfaches Testen mit Mocks.</p>
        <h3 id="dto-muster">3. <strong>DTO-Muster</strong></h3>
        <p>Daten-Transfer-Objekte entkoppeln API-Vertr√§ge von internen
        Domain-Modellen.</p>
        <h3 id="service-locator-via-spring">4. <strong>Service Locator
        (via Spring)</strong></h3>
        <p>Spring verwaltet Bean-Lebenszyklus und
        Abh√§ngigkeitsaufl√∂sung.</p>
        <h3 id="exception-√ºbersetzung">5.
        <strong>Exception-√úbersetzung</strong></h3>
        <p>Gesch√§fts-Exceptions werden auf angemessene HTTP-Status-Codes
        und Error-Responses √ºbersetzt.</p>
        <h3 id="validierungs-helfer">6.
        <strong>Validierungs-Helfer</strong></h3>
        <p>Separate Validator-Klassen f√ºr komplexe
        Gesch√§ftsregel-Validierung.</p>
        <h2 id="performance-√ºberlegungen">Performance-√úberlegungen</h2>
        <ol type="1">
        <li><strong>Pagination</strong> - Gro√üe Ergebnis-Mengen sind
        standardm√§√üig paginiert</li>
        <li><strong>Query-Optimierung</strong> - Benutzerdefinierte
        <code>@Query</code> Methoden f√ºr komplexe Aggregationen</li>
        <li><strong>Caching</strong> - Strategisches Caching h√§ufig
        abgerufener Daten</li>
        <li><strong>Lazy Loading</strong> - Sorgf√§ltige Verwaltung von
        JPA-Beziehungen um N+1-Abfragen zu vermeiden</li>
        <li><strong>Datenbank-Indexierung</strong> - Indizes auf h√§ufig
        gesuchten Spalten (Name, Lieferant, etc.)</li>
        </ol>
        <h2 id="skalierungsstrategie">Skalierungsstrategie</h2>
        <ol type="1">
        <li><strong>Stateless Services</strong> - Kein Session-State auf
        Servern, erm√∂glicht horizontale Skalierung</li>
        <li><strong>Datenbank-Optimierung</strong> - Indizes und
        Query-Optimierung f√ºr Performance</li>
        <li><strong>Async-Verarbeitung</strong> - Langfristige
        Operationen werden asynchron verwaltet</li>
        <li><strong>Load Balancing</strong> - Mehrere Instanzen k√∂nnen
        hinter einem Load Balancer bereitgestellt werden</li>
        <li><strong>Caching-Schichten</strong> - Redis oder √§hnlich f√ºr
        verteiltes Caching</li>
        </ol>
        <h2 id="test-architektur">Test-Architektur</h2>
        <div class="mermaid">
        graph TB
            UnitTests["Unit Tests<br/>Services, Validatoren"]
            IntegrationTests["Integration Tests<br/>Controller, Repositories"]
            E2ETests["E2E Tests<br/>Vollst√§ndiger Request-Zyklus"]
            Coverage["Code-Abdeckung<br/>JaCoCo-Berichte"]

            UnitTests --> Coverage
            IntegrationTests --> Coverage
            E2ETests --> Coverage

            style UnitTests fill:#c8e6c9
            style IntegrationTests fill:#a5d6a7
            style E2ETests fill:#81c784
            style Coverage fill:#66bb6a
        </div>
        <p><strong>Test-Muster:</strong> - <strong>Unit Tests</strong> -
        Alle externen Abh√§ngigkeiten mocken, Fokus auf Logik -
        <strong>Integration Tests</strong> -
        <code>@SpringBootTest</code> mit TestContainers f√ºr Datenbanken
        nutzen - <strong>Mocking</strong> - Mockito f√ºr Service- und
        Repository-Mocking - <strong>Test-Fixtures</strong> - Builder
        und Factory-Methoden f√ºr Test-Daten</p>
        <h2 id="n√§chste-schritte">N√§chste Schritte</h2>
        <ol type="1">
        <li><strong>Erkunden Sie <a
        href="./layers/overview.html">Schichten-Architektur</a></strong>
        - Detaillierte Aufschl√ºsselung jeder Schicht (Controller,
        Service, Repository, Modell, Infrastruktur)</li>
        <li><strong>√úberpr√ºfen Sie <a
        href="./controller/index.html">Controller-Dokumentation</a></strong>
        - REST-API-Endpunkte, Request/Response-Shapes und
        Controller-Muster</li>
        <li><strong>Studieren Sie <a
        href="./repository/index.html">Repository-Schicht</a></strong> -
        Datenzugriffs-Abstraktion mit 7 Repositories
        (SupplierRepository, InventoryItemRepository,
        StockHistoryRepository, AppUserRepository, plus 3
        benutzerdefinierte Analytics-Mixins mit JPQL und nativem
        SQL)</li>
        <li><strong>√úberpr√ºfen Sie <a
        href="./config/index.html">Konfigurations-Management</a></strong>
        - Anwendungseigenschaften, Profile, Umgebungssetup</li>
        <li><strong>√úberpr√ºfen Sie <a
        href="./security/index.html">Sicherheits-Architektur</a></strong>
        - OAuth2-Authentifizierung, rollenbasierte Zugriffskontrolle,
        Datenbankver¬≠schl√ºsselung, Docker-Sicherheit und Demo-Modus</li>
        <li><strong>Erkunden Sie <a
        href="./validation/index.html">Validierungs-Framework</a></strong>
        - Multi-Layer-Validierung mit JSR-380-Constraints,
        benutzerdefinierten Validierern, Exception-Handling und
        Validierungs-Mustern</li>
        <li><strong>√úberpr√ºfen Sie <a
        href="./model/index.html">Datenmodelle</a></strong> - Umfassende
        Entity-Dokumentation (Supplier, InventoryItem, StockHistory,
        AppUser) mit Beziehungen, Lebenszyklen, Verwendungsbeispielen
        und Testing</li>
        <li><strong>Studieren Sie <a
        href="./enums/index.html">Enums-Referenz</a></strong> -
        Typsichere Enumerationen und ihre Gesch√§ftslogik (Role,
        StockChangeReason, AuditSeverity)</li>
        <li><strong>Studieren Sie <a href="./dto/index.html">DTOs und
        Data Transfer Objects</a></strong> - Umfassende Dokumentation
        aller DTOs mit Konventionen, Validierung, Mapper, Pagination und
        Response-Mustern</li>
        <li><strong>Studieren Sie <a
        href="./testing.html">Test-Strategie</a></strong> - Test-Muster
        und Best Practices</li>
        <li><strong>Untersuchen Sie den Quellcode</strong> - Navigieren
        Sie zu
        <code>/src/main/java/com/smartsupplypro/inventory/</code></li>
        </ol>
        <hr />
        <p><a href="./index.html">‚¨ÖÔ∏è Zur√ºck zum
        Architektur-Index</a></p>
      </article>
    </section>
  </main>

  <footer class="footer">
    Smart Supply Pro ¬∑ Generated by Docs Pipeline
  </footer>

  <!-- Mermaid for diagrams in ```mermaid``` blocks -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>mermaid.initialize({ startOnLoad: true });</script>
</body>
</html>
