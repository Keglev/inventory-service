<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Backend ¬∑
diagrams/deployment-diagram ¬∑ Smart Supply Pro Docs</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- CSS lives under /templates on GitHub Pages for inventory-service repo -->
  <link rel="stylesheet" href="/inventory-service/templates/docs.css" />
</head>
<body>
  <header class="topbar">
    <div class="topbar-inner">
      <a href="/inventory-service/" class="logo">üì¶ Smart Supply Pro Docs</a>
      <nav class="nav">
      <a href="/inventory-service/architecture/index.html">Backend Architecture</a>
      <a href="/inventory-service/architecture/overview-de.html">Backend Architektur Deutsch</a>
        <!-- Future: <a href="/inventory-service/frontend/architecture/overview.html">Frontend</a> -->
        <a href="/inventory-service/backend/api/index.html">Backend API</a>
        <!-- Future: <a href="/inventory-service/frontend/api/index.html">Frontend API</a> -->
        <a href="/inventory-service/backend/coverage/index.html">Backend Coverage</a>
        <!-- Future: <a href="/inventory-service/frontend/coverage/index.html">Frontend Coverage</a> -->
      </nav>
    </div>
  </header>

  <main class="layout">
    <aside class="sidebar">
      <h2>Backend</h2>
      <ul>
        <li><a href="/inventory-service/architecture/overview.html">Architecture Overview</a></li>
        <li><a href="/inventory-service/architecture/overview-de.html">Architektur-√úberblick</a></li>
        <li><a href="/inventory-service/architecture/layers/overview.html">Layers</a></li>
        <li><a href="/inventory-service/architecture/model/index.html">Data Models</a></li>
        <li><a href="/inventory-service/architecture/enums/index.html">Enums</a></li>
        <li><a href="/inventory-service/architecture/dto/index.html">DTOs</a></li>
        <li><a href="/inventory-service/architecture/config/index.html">Config</a></li>
        <li><a href="/inventory-service/architecture/controller/index.html">Controllers</a></li>
        <li><a href="/inventory-service/architecture/security/index.html">Security</a></li>
        <li><a href="/inventory-service/architecture/deployment/index.html">Deployment</a></li>
        <li><a href="/inventory-service/architecture/exception/index.html">Exception Handling</a></li>
        <li><a href="/inventory-service/architecture/integration/index.html">Integration</a></li>
        <li><a href="/inventory-service/architecture/repository/index.html">Repository</a></li>
        <li><a href="/inventory-service/architecture/resources/index.html">Resources</a></li>
        <li><a href="/inventory-service/architecture/validation/index.html">Validation</a></li>
        <li><a href="/inventory-service/architecture/testing/index.html">Testing</a></li>
        <li><a href="/inventory-service/architecture/diagrams/index.html">Diagrams</a></li>
      </ul>

      <h2>Frontend</h2>
      <ul>
        <h3>Docs coming soon</h3>
        <!-- Future <li><a href="/inventory-service/frontend/architecture/overview.html">Architecture Overview</a></li> -->
      </ul>

      <h2>Quality</h2>
      <ul>
        <li><a href="/inventory-service/backend/api/index.html">API Reference</a></li>
        <li><a href="/inventory-service/backend/coverage/index.html">JaCoCo Coverage</a></li>
      </ul>
    </aside>

    <section class="content">
            <nav class="toc">
        <h2>On this page</h2>
        <ul>
        <li><a href="#deployment-diagram"
        id="toc-deployment-diagram">Deployment Diagram</a>
        <ul>
        <li><a href="#navigation"
        id="toc-navigation">Navigation</a></li>
        <li><a href="#overview" id="toc-overview">Overview</a></li>
        <li><a href="#build-deployment-pipeline"
        id="toc-build-deployment-pipeline">Build &amp; Deployment
        Pipeline</a></li>
        <li><a href="#detailed-component-description"
        id="toc-detailed-component-description">Detailed Component
        Description</a>
        <ul>
        <li><a href="#development-source-control"
        id="toc-development-source-control">Development &amp; Source
        Control</a></li>
        <li><a href="#cicd-pipeline-github-actions"
        id="toc-cicd-pipeline-github-actions">CI/CD Pipeline (GitHub
        Actions)</a></li>
        <li><a href="#build-artifact" id="toc-build-artifact">Build
        Artifact</a></li>
        <li><a href="#docker-containerization"
        id="toc-docker-containerization">Docker
        Containerization</a></li>
        <li><a href="#container-registry"
        id="toc-container-registry">Container Registry</a></li>
        <li><a href="#fly.io-deployment"
        id="toc-fly.io-deployment">Fly.io Deployment</a></li>
        <li><a href="#application-runtime"
        id="toc-application-runtime">Application Runtime</a></li>
        <li><a href="#database-connection"
        id="toc-database-connection">Database Connection</a></li>
        </ul></li>
        <li><a href="#environment-progression"
        id="toc-environment-progression">Environment
        Progression</a></li>
        <li><a href="#key-features" id="toc-key-features">Key
        Features</a></li>
        <li><a href="#related-documentation"
        id="toc-related-documentation">Related Documentation</a></li>
        </ul></li>
        </ul>
      </nav>
      
      <article class="doc-body">
        <h1 id="deployment-diagram">Deployment Diagram</h1>
        <p><strong>Status</strong>: Complete | <strong>Last
        Updated</strong>: 2025-11-20 | <strong>Version</strong>:
        1.0.0</p>
        <h2 id="navigation">Navigation</h2>
        <p><strong>Back to</strong>: <a href="./index.html">Diagrams
        Index</a> | <a href="../index.html">Architecture Index</a></p>
        <hr />
        <h2 id="overview">Overview</h2>
        <p>The deployment diagram shows how Smart Supply Pro is built,
        containerized, and deployed to cloud infrastructure, including
        the CI/CD pipeline, Docker workflow, and production
        topology.</p>
        <hr />
        <h2 id="build-deployment-pipeline">Build &amp; Deployment
        Pipeline</h2>
        <div class="mermaid">
        graph LR
            Dev["üë®‚Äçüíª Developer<br/>Workstation"]
            Git["üì¶ GitHub<br/>Repository<br/>main branch"]
            CI["‚öôÔ∏è GitHub Actions<br/>CI/CD Pipeline"]
            Build["üî® Maven Build<br/>Compile<br/>Test<br/>Package JAR"]
            Docker["üê≥ Docker<br/>Build Multi-stage<br/>Image"]
            Registry["üìã Container<br/>Registry<br/>(ghcr.io)"]
            Fly["‚òÅÔ∏è Fly.io<br/>Cloud Platform"]
            
            subgraph Production["Production Environment"]
                App["üöÄ Running App<br/>(Spring Boot)<br/>Health Checks"]
                Nginx["üåê Nginx<br/>Reverse Proxy<br/>TLS/HTTPS<br/>Static Files"]
                Regions["üåç Regions<br/>(iad, ord, lhr)"]
            end
            
            Oracle[("üíæ Oracle<br/>Autonomous DB<br/>Wallet Auth")]
            
            Dev -->|git push| Git
            Git -->|Webhook trigger| CI
            CI -->|Checkout| Git
            CI -->|Build| Build
            Build -->|Docker build| Docker
            Docker -->|Push| Registry
            Registry -->|Deploy| Fly
            Fly -->|Run| Nginx
            Nginx -->|Route| App
            App -->|SQL| Oracle
            Fly -->|Distribute| Regions
            
            style Dev fill:#e3f2fd
            style Git fill:#bbdefb
            style CI fill:#90caf9
            style Build fill:#64b5f6
            style Docker fill:#42a5f5
            style Registry fill:#2196f3
            style Fly fill:#1976d2
            style Production fill:#e8f5e9
            style App fill:#81c784
            style Nginx fill:#66bb6a
            style Oracle fill:#1b5e20
        </div>
        <hr />
        <h2 id="detailed-component-description">Detailed Component
        Description</h2>
        <h3 id="development-source-control">Development &amp; Source
        Control</h3>
        <p><strong>Developer Workstation</strong> - Local development
        environment - Runs tests and builds locally - Commits code to
        Git repository - Pushes changes to GitHub main branch</p>
        <p><strong>GitHub Repository</strong> - Source code repository -
        Includes: Source code, Dockerfile, pom.xml, configuration files
        - Main branch triggers automated CI/CD pipeline on push -
        Repository secrets: Docker credentials, deployment tokens</p>
        <h3 id="cicd-pipeline-github-actions">CI/CD Pipeline (GitHub
        Actions)</h3>
        <p><strong>1-ci-test.yml</strong> - Triggered on every push to
        main branch - Steps: 1. Checkout code 2. Set up Maven (Java 17)
        3. Run Maven build (compile, test, package) 4. Run security
        scanning 5. Build Docker image 6. Push image to ghcr.io (GitHub
        Container Registry)</p>
        <p><strong>docs-pipeline.yml</strong> - Generates API
        documentation - Runs Redocly for OpenAPI documentation -
        Generates architecture diagrams (Mermaid) - Publishes
        documentation to GitHub Pages</p>
        <p><strong>2-deploy-ghpages.yml</strong> - Deploys API docs and
        architecture docs to GitHub Pages - Makes documentation publicly
        accessible</p>
        <h3 id="build-artifact">Build Artifact</h3>
        <p><strong>Maven Build Output</strong> - Compiles Java source
        code - Runs unit and integration tests - Creates JAR file:
        <code>inventory-service-0.0.1-SNAPSHOT.jar</code> - JAR
        includes: Classes, dependencies, embedded Tomcat</p>
        <h3 id="docker-containerization">Docker Containerization</h3>
        <p><strong>Multi-Stage Dockerfile</strong> - <strong>Stage 1
        (Builder)</strong>: Compiles Java code, runs tests, creates JAR
        - <strong>Stage 2 (Runtime)</strong>: Uses minimal base image,
        copies JAR, configures entry point - Result: Optimized container
        image with only runtime dependencies - Image size: ~500MB (JDK
        17 + Spring Boot + dependencies)</p>
        <p><strong>Docker Image Features</strong> - Base image:
        <code>eclipse-temurin:17-jre-alpine</code> (lightweight) - Entry
        point: <code>java -jar application.jar</code> - Exposed ports:
        8080 (application), 8081 (health checks) - Environment
        variables: Database credentials, OAuth2 keys (injected at
        runtime)</p>
        <h3 id="container-registry">Container Registry</h3>
        <p><strong>GitHub Container Registry (ghcr.io)</strong> - Stores
        built Docker images - Images tagged with Git commit SHA - Also
        tagged as ‚Äúlatest‚Äù - Authentication via GitHub credentials -
        Integrated with GitHub repository</p>
        <h3 id="fly.io-deployment">Fly.io Deployment</h3>
        <p><strong>fly.toml Configuration</strong> - App name:
        <code>smart-supply-pro</code> (or similar) - Organization and
        region settings - Machine resources: CPU, memory (tuned for
        constraints) - Port configuration: 8080 for application -
        Environment variables and secrets management - Health checks:
        Regular polling of <code>/actuator/health</code></p>
        <p><strong>Deployment Strategy</strong> - Type: Rolling
        deployment (zero-downtime updates) - New versions gradually
        replace old instances - Health checks ensure instance is ready
        before routing traffic</p>
        <p><strong>Regions &amp; Scaling</strong> - Primary regions: iad
        (Northern Virginia), ord (Chicago), lhr (London) - Auto-scaling
        based on CPU/memory - Multiple instances for high availability -
        Load balancing across regions</p>
        <p><strong>Nginx Reverse Proxy</strong> - Handles TLS/HTTPS
        termination - Routes requests to Spring Boot application -
        Serves static frontend files (if applicable) - Compression
        (GZIP) for response optimization - Forwards headers properly for
        authentication</p>
        <h3 id="application-runtime">Application Runtime</h3>
        <p><strong>Spring Boot Application</strong> - Runs on embedded
        Tomcat (port 8080) - Configures itself via environment variables
        - Establishes database connection pool - Initializes security
        context</p>
        <p><strong>Health Checks</strong> - Fly.io pings
        <code>/actuator/health</code> regularly - Application responds
        with UP/DOWN status - Failed checks trigger instance restart -
        Prevents stuck instances from receiving traffic</p>
        <h3 id="database-connection">Database Connection</h3>
        <p><strong>Oracle Autonomous Database</strong> - Wallet-based
        authentication (secure credentials) - JDBC URL configuration:
        <code>jdbc:oracle:thin:@...</code> - Connection pooling:
        HikariCP (optimized pool size) - TLS encryption for network
        traffic - Automatic backups and high availability</p>
        <hr />
        <h2 id="environment-progression">Environment Progression</h2>
        <p><strong>Development</strong> ‚Üí <strong>GitHub</strong> ‚Üí
        <strong>CI Pipeline</strong> ‚Üí <strong>Container
        Registry</strong> ‚Üí <strong>Fly.io Production</strong></p>
        <ol type="1">
        <li>Developer commits to main branch locally</li>
        <li>Push to GitHub triggers CI pipeline</li>
        <li>Pipeline builds, tests, and packages application</li>
        <li>Docker image created and pushed to registry</li>
        <li>Fly.io detects new image and deploys</li>
        <li>Rolling deployment gradually updates instances</li>
        <li>Health checks confirm new version is running</li>
        </ol>
        <hr />
        <h2 id="key-features">Key Features</h2>
        <ul>
        <li><strong>Fully Automated</strong>: Push code ‚Üí everything
        else happens automatically</li>
        <li><strong>Zero-Downtime Deployments</strong>: Rolling updates
        ensure no service interruption</li>
        <li><strong>Security</strong>: Docker image scanning, secret
        management via Fly.io</li>
        <li><strong>High Availability</strong>: Multiple regions and
        instances</li>
        <li><strong>Observability</strong>: Health checks, logs, and
        metrics</li>
        <li><strong>Scalability</strong>: Horizontal scaling via Fly.io
        machines</li>
        </ul>
        <hr />
        <h2 id="related-documentation">Related Documentation</h2>
        <ul>
        <li><a href="./context-diagram.html">Context Diagram</a> -
        System overview</li>
        <li><a href="./logical-architecture.html">Logical
        Architecture</a> - Backend internal structure</li>
        <li><a href="../deployment/index.html">Deployment Index</a> -
        Detailed deployment documentation</li>
        <li><a href="../deployment/build-and-docker-image.html">Build
        &amp; Docker Image</a> - Building process details</li>
        <li><a href="../deployment/flyio-infrastructure.html">Fly.io
        Infrastructure</a> - Cloud platform details</li>
        <li><a href="../deployment/ci-cd-and-docs-pipeline.html">CI/CD
        &amp; Documentation Pipeline</a> - Pipeline details</li>
        </ul>
      </article>
    </section>
  </main>

  <footer class="footer">
    Smart Supply Pro ¬∑ Generated by Docs Pipeline
  </footer>

  <!-- Mermaid for diagrams in ```mermaid``` blocks -->
  <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
  <script>mermaid.initialize({ startOnLoad: true });</script>
</body>
</html>
