<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>AnalyticsServiceImpl.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Inventory Service</a> &gt; <a href="index.source.html" class="el_package">com.smartsupplypro.inventory.service.impl</a> &gt; <span class="el_source">AnalyticsServiceImpl.java</span></div><h1>AnalyticsServiceImpl.java</h1><pre class="source lang-java linenums">package com.smartsupplypro.inventory.service.impl;

import java.time.LocalDate;
import java.util.List;

import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

import com.smartsupplypro.inventory.dto.FinancialSummaryDTO;
import com.smartsupplypro.inventory.dto.ItemUpdateFrequencyDTO;
import com.smartsupplypro.inventory.dto.LowStockItemDTO;
import com.smartsupplypro.inventory.dto.MonthlyStockMovementDTO;
import com.smartsupplypro.inventory.dto.PriceTrendDTO;
import com.smartsupplypro.inventory.dto.StockPerSupplierDTO;
import com.smartsupplypro.inventory.dto.StockUpdateFilterDTO;
import com.smartsupplypro.inventory.dto.StockUpdateResultDTO;
import com.smartsupplypro.inventory.dto.StockValueOverTimeDTO;
import com.smartsupplypro.inventory.service.AnalyticsService;
import com.smartsupplypro.inventory.service.impl.analytics.FinancialAnalyticsService;
import com.smartsupplypro.inventory.service.impl.analytics.StockAnalyticsService;

import lombok.RequiredArgsConstructor;

/**
 * Analytics service facade delegating to specialized analytics implementations.
 *
 * &lt;p&gt;&lt;strong&gt;Purpose&lt;/strong&gt;:
 * Provides analytics functionality by delegating to focused, domain-specific service implementations.
 *
 * &lt;p&gt;&lt;strong&gt;Delegation Strategy&lt;/strong&gt;:
 * &lt;ul&gt;
 *   &lt;li&gt;{@link StockAnalyticsService} - Stock metrics, trends, and low stock alerts&lt;/li&gt;
 *   &lt;li&gt;{@link FinancialAnalyticsService} - WAC-based financial summaries&lt;/li&gt;
 * &lt;/ul&gt;
 *
 * &lt;p&gt;&lt;strong&gt;Design Rationale&lt;/strong&gt;:
 * The original monolithic analytics service (733 lines) was split into specialized services
 * (200-300 lines each) for better maintainability, testability, and single responsibility.
 * This facade provides the original {@link AnalyticsService} interface by delegating to
 * these focused implementations.
 *
 * @author Smart Supply Pro Development Team
 * @version 2.0.0
 * @since 1.0.0
 * @see StockAnalyticsService
 * @see FinancialAnalyticsService
 */
@Service
@RequiredArgsConstructor
@Transactional(readOnly = true)
public class AnalyticsServiceImpl implements AnalyticsService {

    private final StockAnalyticsService stockAnalytics;
    private final FinancialAnalyticsService financialAnalytics;

    @Override
    public List&lt;StockValueOverTimeDTO&gt; getTotalStockValueOverTime(LocalDate startDate,
                                                                  LocalDate endDate,
                                                                  String supplierId) {
<span class="nc" id="L60">        return stockAnalytics.getTotalStockValueOverTime(startDate, endDate, supplierId);</span>
    }

    @Override
    public List&lt;StockPerSupplierDTO&gt; getTotalStockPerSupplier() {
<span class="nc" id="L65">        return stockAnalytics.getTotalStockPerSupplier();</span>
    }

    @Override
    public List&lt;ItemUpdateFrequencyDTO&gt; getItemUpdateFrequency(String supplierId) {
<span class="nc" id="L70">        return stockAnalytics.getItemUpdateFrequency(supplierId);</span>
    }

    @Override
    public List&lt;LowStockItemDTO&gt; getItemsBelowMinimumStock(String supplierId) {
<span class="nc" id="L75">        return stockAnalytics.getItemsBelowMinimumStock(supplierId);</span>
    }

    @Override
    public List&lt;MonthlyStockMovementDTO&gt; getMonthlyStockMovement(LocalDate startDate,
                                                                 LocalDate endDate,
                                                                 String supplierId) {
<span class="nc" id="L82">        return stockAnalytics.getMonthlyStockMovement(startDate, endDate, supplierId);</span>
    }

    @Override
    @Transactional(readOnly = true)
    public long lowStockCount() {
<span class="nc" id="L88">        return stockAnalytics.lowStockCount();</span>
    }

    @Override
    public List&lt;StockUpdateResultDTO&gt; getFilteredStockUpdates(StockUpdateFilterDTO filter) {
<span class="nc" id="L93">        return stockAnalytics.getFilteredStockUpdates(filter);</span>
    }

    @Override
    public List&lt;PriceTrendDTO&gt; getPriceTrend(String itemId, String supplierId, LocalDate start, LocalDate end) {
<span class="nc" id="L98">        return stockAnalytics.getPriceTrend(itemId, supplierId, start, end);</span>
    }

    @Override
    public FinancialSummaryDTO getFinancialSummaryWAC(LocalDate from, LocalDate to, String supplierId) {
<span class="nc" id="L103">        return financialAnalytics.getFinancialSummaryWAC(from, to, supplierId);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.12.202403310830</span></div></body></html>